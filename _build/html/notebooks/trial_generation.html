
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Some ins and outs of trial generation &#8212; Psych 750</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/book.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://psych750.github.io/notebooks/trial_generation.html" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Basic Pandas Operations" href="activity_basic_pandas_operations.html" />
    <link rel="prev" title="Review of fundamentals A" href="review_of_fundamentals_a.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/favicon.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Psych 750</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search..." aria-label="Search..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Schedule
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="schedule.html">
   Week by week schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/psych750/resources/blob/main/syllabus/programming_dataScience_fa22.pdf">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="submitting_assignments.html">
   Submitting assignments
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Installation instructions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="programming_environment_osx.html">
   Instructions for MacOS
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="programming_environment_windows.html">
   Programming Environment for Windows
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Shell_reference.html">
   Basic Linux commands
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Python_reference.html">
   Python reference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Psychopy_reference.html">
   PsychoPy reference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ImageMagick.html">
   ImageMagick/GraphicsMagick reference
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Self Study Guides
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="var_string_num.html">
   Variables, Strings, and Numbers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="list_basics.html">
   Lists - the basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="if_statements.html">
   If Statements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dictionaries.html">
   Dictionaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="introducing_functions.html">
   Introducing Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="list_comprehension.html">
   List Comprehension
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="review_of_fundamentals_a.html">
   Review of Fundamentals A
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Randomization and Iteration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://docs.python.org/3.7/tutorial/errors.html">
   Handling Exceptions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_basic_pandas_operations.html">
   Using Pandas to read/write CSV files.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="globbing_files.html">
   File access-Globbing and preloading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_reference_vs_value.html">
   Mutable and immutable types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="classes.html">
   Classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="review_of_fundamentals_b.html">
   Review of Fundamentals B
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="regexp.html">
   Regular Expressions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  In class activities
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="python_basics.html">
   Python basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_print_pyramids.html">
   The first thinking exercise
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_file_writing.html">
   Primer on writing files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_list_manip_vowels_1.html">
   Working with strings in lists
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_dictionaries.html">
   A few dictionary activities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_trial_generation.html">
   Some more trial generation practice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_debugging.html">
   Debugging practice 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_debugging_experiments.html">
   Debugging practice 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://psych750.github.io/knitted_Rmd/playing_around_gss_solutions.html">
   Basic Examples of GSS data wrangling
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exercises
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise0-test.html">
   Exercise 0-Test assignment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise1-square.html">
   Exercise 1-Show a square and do stuff with it
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise2-stroop.html">
   Exercise 2-A Stroop task
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise3-extended-stroop.html">
   Exercise 3-Extending the Stroop
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise4-more_modularized_stroop.html">
   Exercise 4-Modularization and error checking
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise5-interactive.html">
   Exercise 5-Getting interactive
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise6-tilt_analysis.html">
   Exercise 6-Analyzing the tilt adjustment data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise7-gss-wrangling.html">
   Exercise 7-Exploring the general social survey
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/psych750/psych750.github.io/main?urlpath=tree/notebooks/trial_generation.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/notebooks/trial_generation.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#control-over-proportions">
   Control over proportions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#leaving-things-to-chance">
     Leaving things to chance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exerting-control-over-chance">
     Exerting control over chance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-the-random-seed">
     Setting the random seed
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#combinations-and-permutations">
   Combinations and permutations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indivisibility-and-combinatorial-explosions">
   Indivisibility and combinatorial explosions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#indivisibility">
     Indivisibility
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combinatorial-explosions">
     Combinatorial explosions
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Some ins and outs of trial generation</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#control-over-proportions">
   Control over proportions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#leaving-things-to-chance">
     Leaving things to chance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exerting-control-over-chance">
     Exerting control over chance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-the-random-seed">
     Setting the random seed
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#combinations-and-permutations">
   Combinations and permutations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indivisibility-and-combinatorial-explosions">
   Indivisibility and combinatorial explosions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#indivisibility">
     Indivisibility
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combinatorial-explosions">
     Combinatorial explosions
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="some-ins-and-outs-of-trial-generation">
<h1>Some ins and outs of trial generation<a class="headerlink" href="#some-ins-and-outs-of-trial-generation" title="Permalink to this headline">#</a></h1>
<section id="control-over-proportions">
<h2>Control over proportions<a class="headerlink" href="#control-over-proportions" title="Permalink to this headline">#</a></h2>
<p>Very frequently we want something to happen in an experiment with a certain probability across a range of trials. For example, we might want <em>congruent</em> and <em>incongruent</em> trials to occur equally often. Or we might want to have catch trials happen with a 10% probability. How do we do this?</p>
<section id="leaving-things-to-chance">
<h3>Leaving things to chance<a class="headerlink" href="#leaving-things-to-chance" title="Permalink to this headline">#</a></h3>
<p>An initial idea might be to use a <code class="docutils literal notranslate"><span class="pre">random.choice()</span></code> function. For example, in this case, we select <em>congruent</em> with a 50% probability:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">numTrials</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">conditions</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
    <span class="n">conditions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;congruent&#39;</span><span class="p">,</span><span class="s1">&#39;incongruent&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s check how frequent congruent is in conditions</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">conditions</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;congruent&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>44
</pre></div>
</div>
</div>
</div>
<p>Pretty close to 50! Not bad. But now let’s look at the distributions of a hypothetical 40 subjects, each of whom is assigned congruent/incongruent trials in the manner above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">numSubj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">trialsPerSubject</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">conditions</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">curSubj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numSubj</span><span class="p">):</span>
    <span class="n">conditions</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">conditions</span><span class="p">[</span><span class="n">curSubj</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;congruent&#39;</span><span class="p">,</span><span class="s1">&#39;incongruent&#39;</span><span class="p">]))</span>

<span class="n">frequencies</span> <span class="o">=</span> <span class="p">[</span><span class="n">thisSubj</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;congruent&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">thisSubj</span> <span class="ow">in</span> <span class="n">conditions</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span> 
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">frequencies</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">frequencies</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">frequencies</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="nn">Input In [4],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;seaborn&#39;
</pre></div>
</div>
</div>
</div>
<p>Ok, this isn’t looking so good. The mean is close to 50, but some subjects are only getting 40% and others 60%. The situation gets worse when we have conditions that occur relatively rarely. Let’s have a look at a trial sequence in which we would like to have 10% catch trials.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">numSubj</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">trialsPerSubject</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">isCatchTrial</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">curSubj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numSubj</span><span class="p">):</span>
    <span class="n">isCatchTrial</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numTrials</span><span class="p">):</span>
        <span class="n">isCatchTrial</span><span class="p">[</span><span class="n">curSubj</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mf">.1</span><span class="p">))</span>

<span class="n">frequencies</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">thisSubj</span><span class="p">)</span> <span class="k">for</span> <span class="n">thisSubj</span> <span class="ow">in</span> <span class="n">isCatchTrial</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">frequencies</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span> 
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">frequencies</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">frequencies</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">frequencies</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[12, 8, 6, 7, 6, 3, 8, 9, 15, 11, 9, 9, 11, 12, 14, 14, 10, 8, 5, 13, 7, 9, 12, 4, 6, 8, 11, 9, 17, 9, 9, 7, 10, 9, 12, 16, 12, 6, 6, 12]
9.525 3 17
</pre></div>
</div>
<img alt="../_images/trial_generation_8_1.png" src="../_images/trial_generation_8_1.png" />
</div>
</div>
<p>Instead of 10%, some subjects are seeing only 3%. Others 17%. This kind of variability can kill otherwise excellent experimental designs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>What’s <code class="docutils literal notranslate"><span class="pre">random.random()&lt;.1</span></code>? <code class="docutils literal notranslate"><span class="pre">random.random()</span></code> returns a float from 0 to 1.0 drawn from a uniform distribution. This means that random.random() can be expected to return a value &lt; .1, 10% of the time.</p>
</div>
<p>If you’re curious just how off-kilter things can get, consider an experiment in which instead of 100 trials, we have 40. With a certain condition happening a desired 10% of the time, when we leave things to chance, you have about a 1.4% of having a subject with <em>no</em> trials of this type at all and a ~2.7% of having these trials happen 20% instead of 10% of the time. The desired 10% will occur in only ~20% of the subjects.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">numSubj</span> <span class="o">=</span> <span class="mi">40000</span>
<span class="n">trialsPerSubject</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">isCatchTrial</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">curSubj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numSubj</span><span class="p">):</span>
    <span class="n">isCatchTrial</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">trialsPerSubject</span><span class="p">):</span>
        <span class="n">isCatchTrial</span><span class="p">[</span><span class="n">curSubj</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mf">.1</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">thisSubj</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="k">for</span> <span class="n">thisSubj</span> <span class="ow">in</span> <span class="n">isCatchTrial</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">thisSubj</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span> <span class="k">for</span> <span class="n">thisSubj</span> <span class="ow">in</span> <span class="n">isCatchTrial</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">thisSubj</span><span class="p">)</span><span class="o">==</span><span class="mi">8</span> <span class="k">for</span> <span class="n">thisSubj</span> <span class="ow">in</span> <span class="n">isCatchTrial</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.01505
0.20465
0.027325
</pre></div>
</div>
</div>
</div>
</section>
<section id="exerting-control-over-chance">
<h3>Exerting control over chance<a class="headerlink" href="#exerting-control-over-chance" title="Permalink to this headline">#</a></h3>
<p>The solution is to <em>not</em> leave things to chance, but specify precisely, the proportion you want. The easiest way of doing that is to create all your conditions, with prespecified proportions. Want 100 trials with a 50/50 split of congruent/incongruent? Easy!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numTrials</span><span class="o">=</span><span class="mi">100</span>
<span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;congruent&#39;</span><span class="p">,</span><span class="s1">&#39;incongruent&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">numTrials</span>
<span class="n">conditions</span> <span class="o">=</span> <span class="n">conditions</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">numTrials</span><span class="p">]</span>
<span class="n">conditions</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;congruent&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>50
</pre></div>
</div>
</div>
</div>
<p>Then, to get a random order, simply <code class="docutils literal notranslate"><span class="pre">random.shuffle</span></code> it.</p>
<p>Want to get a 45/45/10 split between three conditions? Let’s try it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numTrials</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;congruent&#39;</span><span class="p">]</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">numTrials</span><span class="o">*</span><span class="mf">.45</span><span class="p">)</span> <span class="o">+</span> \
    <span class="p">[</span><span class="s1">&#39;incongruent&#39;</span><span class="p">]</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">numTrials</span><span class="o">*</span><span class="mf">.45</span><span class="p">)</span> <span class="o">+</span> \
    <span class="p">[</span><span class="s1">&#39;catch&#39;</span><span class="p">]</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">numTrials</span><span class="o">*</span><span class="mf">.1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">conditions</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;congruent&#39;</span><span class="p">),</span> \
    <span class="n">conditions</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;incongruent&#39;</span><span class="p">),</span> \
    <span class="n">conditions</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;catch&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>45 45 10
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>What’re those slashes in the above? It’s a way to break up a long line for ease of reading. Python knows that lines that terminate with backslashes should continue to the next line</p>
</div>
</section>
<section id="setting-the-random-seed">
<h3>Setting the random seed<a class="headerlink" href="#setting-the-random-seed" title="Permalink to this headline">#</a></h3>
<p>When you perform any kind of randomization, the (pseudo) random-number generator (PRNG) is initialized with a <em>seed</em>. This seed determines everything that happens with the PRNG. If you know the starting seed, you can predict how a list is shuffled, what item is chosen from a list, and everything else that is “random”.</p>
<p>When you execute a randomization routine, the seed is set for your, usually using some transformation of the current time. However, it is frequently useful to set the seed manually. This allows you to re-execute your code using the very same “random” order. Let’s see how this works.</p>
<p>Here, we initialize a list of numbers 1-20, shuffle it, print it, and then shuffle it/print it again. As you might expect, what you get are two different orders</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="n">initial_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 3, 11, 8, 13, 9, 6, 2, 17, 5, 14, 10, 16, 7, 12, 4, 18, 19, 15]
[16, 9, 6, 5, 10, 8, 11, 2, 19, 1, 14, 18, 15, 3, 4, 7, 0, 17, 13, 12]
</pre></div>
</div>
</div>
</div>
<p>Now let’s try that again, except we’re going to set the seed to some arbitrary value at the outset</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">initial_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[14, 11, 5, 6, 19, 8, 9, 12, 16, 2, 10, 4, 17, 7, 3, 0, 15, 13, 1, 18]
[16, 1, 14, 0, 9, 11, 6, 3, 8, 13, 5, 12, 18, 10, 15, 2, 7, 17, 4, 19]
</pre></div>
</div>
</div>
</div>
<p>Now let’s do that again:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">initial_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">initial_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[14, 11, 5, 6, 19, 8, 9, 12, 16, 2, 10, 4, 17, 7, 3, 0, 15, 13, 1, 18]
[16, 1, 14, 0, 9, 11, 6, 3, 8, 13, 5, 12, 18, 10, 15, 2, 7, 17, 4, 19]
</pre></div>
</div>
</div>
</div>
<p>Notice that the randomization sequences in the two cases are exactly the same. By controlling the initial seed (i.e., starting point) of the PRNG, it becomes predictable (to us, though not to the participant).</p>
</section>
</section>
<section id="combinations-and-permutations">
<h2>Combinations and permutations<a class="headerlink" href="#combinations-and-permutations" title="Permalink to this headline">#</a></h2>
<p>When designing trial lists, it is frequently useful to cross two or more factors. We’ve already seen how to do this with nested for loops, but – depending on your precise needs – there’s a more compact solution.</p>
<p>Let’s say we have two crossed factors, <code class="docutils literal notranslate"><span class="pre">cue</span></code> (dog, cat, cow) and <code class="docutils literal notranslate"><span class="pre">target</span></code> (dog, cat, cow). Here’s how you might generate all the combinations between these using a series of <code class="docutils literal notranslate"><span class="pre">for</span></code> loops.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cues</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;cow &#39;</span><span class="p">]</span>
<span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;cow &#39;</span><span class="p">]</span>

<span class="n">trials</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">curCue</span> <span class="ow">in</span> <span class="n">cues</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">curTarget</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">:</span>
        <span class="n">trials</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">curCue</span><span class="p">,</span><span class="n">curTarget</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;dog&#39;, &#39;dog&#39;), (&#39;dog&#39;, &#39;cat&#39;), (&#39;dog&#39;, &#39;cow &#39;), (&#39;cat&#39;, &#39;dog&#39;), (&#39;cat&#39;, &#39;cat&#39;), (&#39;cat&#39;, &#39;cow &#39;), (&#39;cow &#39;, &#39;dog&#39;), (&#39;cow &#39;, &#39;cat&#39;), (&#39;cow &#39;, &#39;cow &#39;)]
</pre></div>
</div>
</div>
</div>
<p>Here’s the more compact way using the <code class="docutils literal notranslate"><span class="pre">itertools</span></code> package</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>

<span class="n">cues</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;cow &#39;</span><span class="p">]</span>
<span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;cow &#39;</span><span class="p">]</span>

<span class="n">trials</span> <span class="o">=</span> <span class="n">product</span><span class="p">(</span><span class="n">cues</span><span class="p">,</span><span class="n">targets</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">trials</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;dog&#39;, &#39;dog&#39;), (&#39;dog&#39;, &#39;cat&#39;), (&#39;dog&#39;, &#39;cow &#39;), (&#39;cat&#39;, &#39;dog&#39;), (&#39;cat&#39;, &#39;cat&#39;), (&#39;cat&#39;, &#39;cow &#39;), (&#39;cow &#39;, &#39;dog&#39;), (&#39;cow &#39;, &#39;cat&#39;), (&#39;cow &#39;, &#39;cow &#39;)]
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">itertools</span></code> also has functions for generating permutations and combinations, useful when you want to generate combinations (order doesn’t matter) or permutations (order matters) of your factors. Suppose for example, you want to generate all possible cue-pairs:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span><span class="p">,</span> <span class="n">permutations</span>

<span class="n">cues</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;cow&#39;</span><span class="p">,</span> <span class="s1">&#39;penguin&#39;</span><span class="p">,</span> <span class="s1">&#39;dolphin&#39;</span><span class="p">]</span>

<span class="n">trials</span> <span class="o">=</span> <span class="n">combinations</span><span class="p">(</span><span class="n">cues</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">trials</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;dog&#39;, &#39;cat&#39;), (&#39;dog&#39;, &#39;cow&#39;), (&#39;dog&#39;, &#39;penguin&#39;), (&#39;dog&#39;, &#39;dolphin&#39;), (&#39;cat&#39;, &#39;cow&#39;), (&#39;cat&#39;, &#39;penguin&#39;), (&#39;cat&#39;, &#39;dolphin&#39;), (&#39;cow&#39;, &#39;penguin&#39;), (&#39;cow&#39;, &#39;dolphin&#39;), (&#39;penguin&#39;, &#39;dolphin&#39;)]
</pre></div>
</div>
</div>
</div>
<p>Suppose you want <em>permutations</em> instead. Easy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span><span class="p">,</span> <span class="n">permutations</span>

<span class="n">cues</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;cow&#39;</span><span class="p">,</span> <span class="s1">&#39;penguin&#39;</span><span class="p">,</span> <span class="s1">&#39;dolphin&#39;</span><span class="p">]</span>

<span class="n">trials</span> <span class="o">=</span> <span class="n">permutations</span><span class="p">(</span><span class="n">cues</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">trials</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;dog&#39;, &#39;cat&#39;), (&#39;dog&#39;, &#39;cow&#39;), (&#39;dog&#39;, &#39;penguin&#39;), (&#39;dog&#39;, &#39;dolphin&#39;), (&#39;cat&#39;, &#39;dog&#39;), (&#39;cat&#39;, &#39;cow&#39;), (&#39;cat&#39;, &#39;penguin&#39;), (&#39;cat&#39;, &#39;dolphin&#39;), (&#39;cow&#39;, &#39;dog&#39;), (&#39;cow&#39;, &#39;cat&#39;), (&#39;cow&#39;, &#39;penguin&#39;), (&#39;cow&#39;, &#39;dolphin&#39;), (&#39;penguin&#39;, &#39;dog&#39;), (&#39;penguin&#39;, &#39;cat&#39;), (&#39;penguin&#39;, &#39;cow&#39;), (&#39;penguin&#39;, &#39;dolphin&#39;), (&#39;dolphin&#39;, &#39;dog&#39;), (&#39;dolphin&#39;, &#39;cat&#39;), (&#39;dolphin&#39;, &#39;cow&#39;), (&#39;dolphin&#39;, &#39;penguin&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Why are we wrapping <code class="docutils literal notranslate"><span class="pre">trials</span></code> and range(…) inside a list() function? Because itertools functions (and as of Python 3, range) return iterators (or lazy iterators in case of range) rather than lists. Read about iterators and generators <a class="reference external" href="https://anandology.com/python-practice-book/iterators.html">here</a>.</p>
</div>
</section>
<section id="indivisibility-and-combinatorial-explosions">
<h2>Indivisibility and combinatorial explosions<a class="headerlink" href="#indivisibility-and-combinatorial-explosions" title="Permalink to this headline">#</a></h2>
<section id="indivisibility">
<h3>Indivisibility<a class="headerlink" href="#indivisibility" title="Permalink to this headline">#</a></h3>
<p>It’s nice that <code class="docutils literal notranslate"><span class="pre">.45</span> <span class="pre">*</span> <span class="pre">100</span> <span class="pre">=</span> <span class="pre">45</span></code> - an integer, but what if we only have 42 trials to work with and we need something to happen 10% of the time? The short answer is – too bad – we can’t. But what we <em>can</em> do is ensure that something happens as close to 10% of the time as possible. Here’s how to do that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">propMatch</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">propMismatch</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span><span class="n">propMatch</span>
<span class="n">numTrials</span> <span class="o">=</span> <span class="mi">42</span>

<span class="n">trials</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mismatch&#39;</span><span class="p">]</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">numTrials</span><span class="o">*</span><span class="n">propMismatch</span><span class="p">))</span> <span class="o">+</span> \
        <span class="p">[</span><span class="s1">&#39;match&#39;</span><span class="p">]</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">numTrials</span><span class="o">*</span><span class="n">propMatch</span><span class="p">))</span>
    
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;there are </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span><span class="o">/</span><span class="n">trials</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;match&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> match trials out of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span><span class="si">}</span><span class="s2"> total trials&quot;</span><span class="p">)</span>


<span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">trials</span><span class="p">))</span><span class="o">/</span><span class="n">trials</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;match&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>there are 10.5 match trials out of 42 total trials
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10.5
</pre></div>
</div>
</div>
</div>
</section>
<section id="combinatorial-explosions">
<h3>Combinatorial explosions<a class="headerlink" href="#combinatorial-explosions" title="Permalink to this headline">#</a></h3>
<p>What happens if we have lots of factors and need to cross them, but doing so generates too many trials to use?</p>
<p>For example, suppose we have 50 images and we want to measure their visual similarities. One way to do this is to present people with pairs of images and have them respond, as quickly as possible whether the two images are the same or different. We then use the reaction time to respond ‘different’ as a measure of visual similarity. The more visually similar they are, the longer people will take to judge them as being different.</p>
<p>In implementing this task we run into two problems. <strong>First</strong>, although we’re only interested in the trials on which the two images are different, we need to have some trials on which the two images are identical (otherwise participants can just hit the ‘different’ button every time without bothering to inspect the images. So we need to decide on the proportion of <em>same</em> trials. <strong>Second</strong> even with only 50 images, the number of possible combinations is <code class="docutils literal notranslate"><span class="pre">50*49/2=1225</span></code> (excluding identical pairs). That’s far far too many to test sensibly, especially since in a study like this we want to sample each pair at least 10 times per subject to get a somewhat stable RT estimate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span>

<span class="n">images</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="c1">#here just numbers, but can be filenames or anything else</span>
<span class="n">repetitionsPerImage</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">numDiffTrialsPerPerson</span> <span class="o">=</span> <span class="mi">350</span>

<span class="c1">#35 is a factor of 1225, so let&#39;s have each person be tested on 35 pairs, </span>
<span class="c1">#with each pair sampled 10 times. So we have 350 different trials, </span>
<span class="c1">#Let&#39;s sample the same trials twice each (100 trials), so we have a total of </span>
<span class="c1">#350+400 = 450 trials per person </span>

<span class="k">def</span> <span class="nf">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="n">setNum</span><span class="p">,</span><span class="n">seed1</span><span class="p">,</span><span class="n">seed2</span><span class="p">):</span>
    <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed1</span><span class="p">)</span>
    <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>

    <span class="n">same_trials</span> <span class="o">=</span> <span class="p">[(</span><span class="n">image</span><span class="p">,</span><span class="n">image</span><span class="p">)</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="n">diff_pairs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>

    <span class="n">diff_trials</span> <span class="o">=</span> <span class="n">diff_pairs</span><span class="p">[(</span><span class="n">setNum</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">n</span><span class="o">/</span><span class="n">repetitionsPerImage</span><span class="p">:</span><span class="n">setNum</span><span class="o">*</span><span class="n">n</span><span class="o">/</span><span class="n">repetitionsPerImage</span><span class="p">]</span> <span class="o">*</span> <span class="n">repetitionsPerImage</span>
    
    <span class="n">all_trials</span> <span class="o">=</span> <span class="n">diff_trials</span><span class="o">+</span><span class="n">same_trials</span>
    <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed2</span><span class="p">)</span>
    <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">all_trials</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">all_trials</span>

<span class="c1">#you would then run groups of subjects on the following sets of trials (setNum would be \</span>
<span class="c1"># a runtime variable. Here, we&#39;re arbitrarily using a random seed of 10. </span>
<span class="c1"># The exact number is unimportant. What&#39;s important is that it&#39;s the same seed for all</span>
<span class="c1"># The use of a secod seed ensures that the order of trial-types (same/diff) is different</span>
<span class="c1"># for different subjects</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">102</span><span class="p">)</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">103</span><span class="p">)</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">104</span><span class="p">)</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">105</span><span class="p">)</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">106</span><span class="p">)</span>
<span class="c1">#... all the way until set 35:</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">135</span><span class="p">)</span>
<span class="c1"># We need 35 subjects to sample 350 trials 10 times each</span>
<span class="c1">#the last subject will see these trials:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [20],</span> in <span class="ni">&lt;cell line: 33&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">     </span><span class="mi">26</span>     <span class="k">return</span> <span class="n">all_trials</span>
<span class="g g-Whitespace">     </span><span class="mi">28</span> <span class="c1">#you would then run groups of subjects on the following sets of trials (setNum would be \</span>
<span class="g g-Whitespace">     </span><span class="mi">29</span> <span class="c1"># a runtime variable. Here, we&#39;re arbitrarily using a random seed of 10. </span>
<span class="g g-Whitespace">     </span><span class="mi">30</span> <span class="c1"># The exact number is unimportant. What&#39;s important is that it&#39;s the same seed for all</span>
<span class="g g-Whitespace">     </span><span class="mi">31</span> <span class="c1"># The use of a secod seed ensures that the order of trial-types (same/diff) is different</span>
<span class="g g-Whitespace">     </span><span class="mi">32</span> <span class="c1"># for different subjects</span>
<span class="ne">---&gt; </span><span class="mi">33</span> <span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span> <span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">102</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">35</span> <span class="n">trials</span> <span class="o">=</span> <span class="n">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">numDiffTrialsPerPerson</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">103</span><span class="p">)</span>

<span class="nn">Input In [20],</span> in <span class="ni">n_pairs</span><span class="nt">(images, n, repetitionsPerImage, setNum, seed1, seed2)</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span> <span class="k">def</span> <span class="nf">n_pairs</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">repetitionsPerImage</span><span class="p">,</span><span class="n">setNum</span><span class="p">,</span><span class="n">seed1</span><span class="p">,</span><span class="n">seed2</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span>     <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed1</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">16</span>     <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span>     <span class="n">same_trials</span> <span class="o">=</span> <span class="p">[(</span><span class="n">image</span><span class="p">,</span><span class="n">image</span><span class="p">)</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span>     <span class="n">diff_pairs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">images</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>

<span class="nn">File ~/anaconda3/envs/psych750/lib/python3.8/random.py:307,</span> in <span class="ni">Random.shuffle</span><span class="nt">(self, x, random)</span>
<span class="g g-Whitespace">    </span><span class="mi">304</span>     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))):</span>
<span class="g g-Whitespace">    </span><span class="mi">305</span>         <span class="c1"># pick an element in x[:i+1] with which to exchange x[i]</span>
<span class="g g-Whitespace">    </span><span class="mi">306</span>         <span class="n">j</span> <span class="o">=</span> <span class="n">randbelow</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">307</span>         <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">308</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span>     <span class="n">_int</span> <span class="o">=</span> <span class="nb">int</span>

<span class="ne">TypeError</span>: &#39;range&#39; object does not support item assignment
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Gary Lupyan<br/>
  
      &copy; Copyright 2022. Some examples adapted from http://introtopython.org/.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>