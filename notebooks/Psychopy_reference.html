
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Psychopy reference &#8212; Psych 750</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/book.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://psych750.github.io/notebooks/Psychopy_reference.html" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ImageMagick basics" href="ImageMagick.html" />
    <link rel="prev" title="Python basics" href="Python_reference.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/favicon.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Psych 750</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search..." aria-label="Search..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Schedule
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="schedule.html">
   Week by week schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/psych750/resources/blob/main/syllabus/programming_dataScience_fa23.pdf">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="submitting_assignments.html">
   Submitting assignments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="project_2023.html">
   Project info
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Installation instructions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="programming_environment_osx.html">
   Instructions for MacOS
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="programming_environment_windows.html">
   Installation and setup for Windows
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Shell_reference.html">
   Basic Linux commands
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Python_reference.html">
   Python reference
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   PsychoPy reference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ImageMagick.html">
   ImageMagick/GraphicsMagick reference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="PRAW_demo.html">
   PRAW Reddit API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="API_list.html">
   Some fun APIs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Self Study Guides
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="var_string_num.html">
   Variables, Strings, and Numbers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="list_basics.html">
   Lists - the basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="if_statements.html">
   If Statements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dictionaries.html">
   Dictionaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="introducing_functions.html">
   Introducing Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="list_comprehension.html">
   List Comprehension
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="review_of_fundamentals_a.html">
   Review of Fundamentals A
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="trial_generation.html">
   Randomization and Iteration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://docs.python.org/3.7/tutorial/errors.html">
   Handling Exceptions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="review_of_fundamentals_b.html">
   Review of Fundamentals B
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_basic_pandas_operations.html">
   Using Pandas to read/write CSV files.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="globbing_files.html">
   File access-Globbing and preloading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_reference_vs_value.html">
   Mutable and immutable types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="regexp.html">
   Regular Expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="classes.html">
   Classes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  In class activities
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="python_basics.html">
   Python basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_print_pyramids.html">
   The first thinking exercise
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_file_writing.html">
   Primer on writing files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_list_manip_vowels_1.html">
   Working with strings in lists
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_dictionaries.html">
   A few dictionary activities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_trial_generation.html">
   Some more trial generation practice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activity_debugging.html">
   Debugging practice 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://psych750.github.io/knitted_Rmd/playing_around_gss.html">
   Basic Examples of GSS data wrangling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="more_gss_practice.html">
   More dataviz practice with GSS
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="nltk_demo.html">
   NLTK demo
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scraping.html">
   Webscraping demo and practice
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exercises
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise0-test.html">
   Exercise 0-Test assignment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise1-square.html">
   Exercise 1-Show a square and do stuff with it
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise2-stroop.html">
   Exercise 2-A Stroop task
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise3-extended-stroop.html">
   Exercise 3-Extending the Stroop
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise4-more_modularized_stroop.html">
   Exercise 4-Modularization and speech recognition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise5-face-search.html">
   Exercise 5-Loading external files and mouse action!
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise6-stroop_analysis.html">
   Exercise 6-Analyzing the Stroop data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise7-gss-wrangling.html">
   Exercise 7-Exploring the general social survey
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise8-more-gss-wrangling.html">
   Exercise 8-More practice with GSS data wrangling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise9-regexps.html">
   Exercise 9 - Practice with regular expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise10-nltk.html">
   Exercise 10-Natural language processing with NLTK
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Exercise11-oop_circles.html">
   Exercise 11-Practice with object oriented programming
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/psych750/psych750.github.io/main?urlpath=tree/notebooks/Psychopy_reference.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/notebooks/Psychopy_reference.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#some-helper-functions-for-grabbing-runtime-variables-with-a-gui-box">
   Some helper functions for grabbing runtime variables with a GUI box
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pop-up-an-error-box">
     Pop up an error box
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#popping-up-a-box-to-get-user-input-e-g-to-specify-a-condition-name-or-subject-code-at-runtime">
     Popping up a box to get user input e.g., to specify a condition name or subject code at runtime
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-different-way-of-showing-a-text-box">
     A different way of showing a text box
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#easier-way-to-get-a-bunch-of-runtime-variables">
     Easier way to get a bunch of runtime variables
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-state-of-a-variable-and-reloading-it">
     Saving state of a variable and reloading it
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-i-have-people-respond-with-a-mouse">
   How do I have people respond with a mouse?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-mouse-position-at-point-of-button-press">
     Get mouse position at point of button press.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#show-text-until-mouse-click">
     Show text until mouse click
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wait-for-click-on-a-picture">
     Wait for click on a picture
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-i-keep-doing-something-while-waiting-for-a-response">
   How do I keep doing something while waiting for a response?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-generic-function-for-collecting-responses">
     A generic function for collecting responses
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-function-for-writing-a-string-trial-info-to-a-file">
     A function for writing a string (trial info) to a file.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#convert-from-polar-to-rectangular-coordinates">
   Convert from polar to rectangular coordinates
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#staircasing">
   Staircasing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preloading-image-and-audio-files">
   Preloading image and audio files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importing-a-custom-function-and-testing-a-function-that-s-in-a-separate-file">
   Importing a custom function and Testing a function that’s in a separate file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importing-a-trial-list">
   Importing a trial list
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-function-for-grabbing-screenshots">
   A function for grabbing screenshots
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#popping-up-a-web-based-survey-from-within-your-python-script">
   Popping up a web-based survey from within your python script
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#google-form">
     Google form
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#qualtrics-forms">
     Qualtrics forms
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-a-webcam-in-psychopy">
   Using a webcam in psychopy
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Psychopy reference</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#some-helper-functions-for-grabbing-runtime-variables-with-a-gui-box">
   Some helper functions for grabbing runtime variables with a GUI box
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pop-up-an-error-box">
     Pop up an error box
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#popping-up-a-box-to-get-user-input-e-g-to-specify-a-condition-name-or-subject-code-at-runtime">
     Popping up a box to get user input e.g., to specify a condition name or subject code at runtime
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-different-way-of-showing-a-text-box">
     A different way of showing a text box
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#easier-way-to-get-a-bunch-of-runtime-variables">
     Easier way to get a bunch of runtime variables
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-state-of-a-variable-and-reloading-it">
     Saving state of a variable and reloading it
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-i-have-people-respond-with-a-mouse">
   How do I have people respond with a mouse?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-mouse-position-at-point-of-button-press">
     Get mouse position at point of button press.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#show-text-until-mouse-click">
     Show text until mouse click
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wait-for-click-on-a-picture">
     Wait for click on a picture
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-i-keep-doing-something-while-waiting-for-a-response">
   How do I keep doing something while waiting for a response?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-generic-function-for-collecting-responses">
     A generic function for collecting responses
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-function-for-writing-a-string-trial-info-to-a-file">
     A function for writing a string (trial info) to a file.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#convert-from-polar-to-rectangular-coordinates">
   Convert from polar to rectangular coordinates
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#staircasing">
   Staircasing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preloading-image-and-audio-files">
   Preloading image and audio files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importing-a-custom-function-and-testing-a-function-that-s-in-a-separate-file">
   Importing a custom function and Testing a function that’s in a separate file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importing-a-trial-list">
   Importing a trial list
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-function-for-grabbing-screenshots">
   A function for grabbing screenshots
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#popping-up-a-web-based-survey-from-within-your-python-script">
   Popping up a web-based survey from within your python script
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#google-form">
     Google form
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#qualtrics-forms">
     Qualtrics forms
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-a-webcam-in-psychopy">
   Using a webcam in psychopy
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="psychopy-reference">
<h1>Psychopy reference<a class="headerlink" href="#psychopy-reference" title="Permalink to this headline">#</a></h1>
<p>Please use the official <a class="reference external" href="http://www.psychopy.org/api/">psychopy reference</a> page for looking up how to use specific functions and objects. Below is some extra functionality in the form of little recipes that may come in handy.</p>
<section id="some-helper-functions-for-grabbing-runtime-variables-with-a-gui-box">
<h2>Some helper functions for grabbing runtime variables with a GUI box<a class="headerlink" href="#some-helper-functions-for-grabbing-runtime-variables-with-a-gui-box" title="Permalink to this headline">#</a></h2>
<section id="pop-up-an-error-box">
<h3>Pop up an error box<a class="headerlink" href="#pop-up-an-error-box" title="Permalink to this headline">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">visual</span><span class="p">,</span> <span class="n">gui</span>

<span class="k">def</span> <span class="nf">popupError</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">errorDlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">Dlg</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">400</span><span class="p">))</span>
    <span class="n">errorDlg</span><span class="o">.</span><span class="n">addText</span><span class="p">(</span><span class="s1">&#39;Error: &#39;</span><span class="o">+</span><span class="n">text</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Red&#39;</span><span class="p">)</span>
    <span class="n">errorDlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">popupError</span><span class="p">(</span><span class="s1">&#39;There was an error!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="popping-up-a-box-to-get-user-input-e-g-to-specify-a-condition-name-or-subject-code-at-runtime">
<h3>Popping up a box to get user input e.g., to specify a condition name or subject code at runtime<a class="headerlink" href="#popping-up-a-box-to-get-user-input-e-g-to-specify-a-condition-name-or-subject-code-at-runtime" title="Permalink to this headline">#</a></h3>
<p>Here’s the simplest code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">visual</span><span class="p">,</span> <span class="n">gui</span>

<span class="n">runtime_variables</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Name&#39;</span><span class="p">:</span><span class="s1">&#39;Enter your name&#39;</span><span class="p">}</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">userVar</span><span class="p">)</span>
</pre></div>
</div>
<p>You can now access the value of the ‘Name’ variable using the
following syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_variables</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>For example, if I enter ‘Gary’ in the pop-up box. Then once I press
enter and the box closes,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_variables</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>will return the string ‘Gary’</p>
<p>Note that when the box pops up it will be pre-filled with “Enter your
name”. To overwrite it, just hit tab until it’s highlightd. Or
position your cursor inside it, hit command-A (ctrl-A on PC) which will
highlight all the text, and then start typing. For a more elegant text
box, see below.</p>
</section>
<section id="a-different-way-of-showing-a-text-box">
<h3>A different way of showing a text box<a class="headerlink" href="#a-different-way-of-showing-a-text-box" title="Permalink to this headline">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myDlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">Dlg</span><span class="p">()</span>
<span class="n">myDlg</span><span class="o">.</span><span class="n">addText</span><span class="p">(</span><span class="s1">&#39;Enter your name&#39;</span><span class="p">)</span>
<span class="n">myDlg</span><span class="o">.</span><span class="n">addField</span><span class="p">(</span><span class="s1">&#39;Name:&#39;</span><span class="p">)</span>
<span class="n">myDlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">#when the box closes, the data you want will be in myDlg.data</span>
<span class="c1">#if you want to get a bit fancier, you can monitor the &#39;OK&#39; or &#39;cancel&#39; press:</span>
<span class="k">if</span> <span class="n">myDlg</span><span class="o">.</span><span class="n">OK</span><span class="p">:</span>  <span class="c1"># then the user pressed OK</span>
    <span class="c1"># this will print the list of passed in values in the order in which you added the fields above.</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">myDlg</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;User cancelled&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">myDlg.data</span></code> is a list, so to access the first element, you should index it: <code class="docutils literal notranslate"><span class="pre">myDlg.data[0]</span></code>. This method is included for demonstration, but is <strong>not</strong> preferable because it requires you to know and keep track of which index corresponds to which variable.</p>
</div>
</section>
<section id="easier-way-to-get-a-bunch-of-runtime-variables">
<h3>Easier way to get a bunch of runtime variables<a class="headerlink" href="#easier-way-to-get-a-bunch-of-runtime-variables" title="Permalink to this headline">#</a></h3>
<p>Runtime variables are variables you want to set at runtime – the subject code, demographic info, the condition(s) the subject is assigned to, etc. Here’s a more flexible solution (compared to those listed above) to get a bunch of variables at the same time.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_runtime_vars</span><span class="p">(</span><span class="n">vars_to_get</span><span class="p">,</span><span class="n">order</span><span class="p">,</span><span class="n">exp_version</span><span class="o">=</span><span class="s2">&quot;experiment_code_for_reference&quot;</span><span class="p">):</span>
    <span class="c1">#Get run time variables, see http://www.psychopy.org/api/gui.html for explanation</span>
    <span class="n">infoDlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">vars_to_get</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_version</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">infoDlg</span><span class="o">.</span><span class="n">OK</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">vars_to_get</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;User Cancelled&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Sample usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">order</span> <span class="o">=</span>  <span class="p">[</span><span class="s1">&#39;subj_code&#39;</span><span class="p">,</span><span class="s1">&#39;seed&#39;</span><span class="p">,</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span>
<span class="n">runtime_vars</span><span class="o">=</span> <span class="n">getRunTimeVars</span><span class="p">({</span><span class="s1">&#39;subj_code&#39;</span><span class="p">:</span><span class="s1">&#39;stroop_101&#39;</span><span class="p">,</span> <span class="s1">&#39;seed&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">:[</span><span class="s1">&#39;Choose&#39;</span><span class="p">,</span> <span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">]},</span> <span class="n">order</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-challenge admonition">
<p class="admonition-title">Challenge!</p>
<p>A better solution here is to re-implement this recipe with an OrderedDict</p>
</div>
</section>
<section id="saving-state-of-a-variable-and-reloading-it">
<h3>Saving state of a variable and reloading it<a class="headerlink" href="#saving-state-of-a-variable-and-reloading-it" title="Permalink to this headline">#</a></h3>
<p>It’s often useful to save the state of a previous experiment run (especially the subject code). Here’s an example of a get_runtime_vars function that stores a (pickld) dictionary of all the runtime variables and. The next time around we preset the subject code to the previous subject code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_runtime_vars</span><span class="p">(</span><span class="n">vars_to_get</span><span class="p">,</span><span class="n">order</span><span class="p">,</span><span class="n">exp_version</span><span class="o">=</span><span class="s2">&quot;Exercise 4&quot;</span><span class="p">):</span>
    <span class="c1">#Get run time variables, see http://www.psychopy.org/api/gui.html for explanation</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">vars_to_get</span><span class="p">[</span><span class="s1">&#39;subj_code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">filetools</span><span class="o">.</span><span class="n">fromFile</span><span class="p">(</span><span class="s1">&#39;last_run.pickle&#39;</span><span class="p">)[</span><span class="s1">&#39;subj_code&#39;</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;retrieved these&quot;</span><span class="p">,</span><span class="n">vars_to_get</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">infoDlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">vars_to_get</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_version</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span><span class="n">copyDict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
        <span class="n">populated_runtime_vars</span> <span class="o">=</span> <span class="n">infoDlg</span><span class="o">.</span><span class="n">dictionary</span> 
        <span class="n">data_file</span> <span class="o">=</span> <span class="n">open_data_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data/</span><span class="si">{</span><span class="n">populated_runtime_vars</span><span class="p">[</span><span class="s1">&#39;subj_code&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_data.csv&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="s1">&#39;Choose&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">populated_runtime_vars</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="n">popupError</span><span class="p">(</span><span class="s1">&#39;Need to choose a value from each dropdown box&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">infoDlg</span><span class="o">.</span><span class="n">OK</span> <span class="ow">and</span> <span class="n">data_file</span><span class="p">:</span>
            <span class="n">filetools</span><span class="o">.</span><span class="n">toFile</span><span class="p">(</span><span class="s1">&#39;last_run.pickle&#39;</span><span class="p">,</span> <span class="n">populated_runtime_vars</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">populated_runtime_vars</span><span class="p">,</span> <span class="n">data_file</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">infoDlg</span><span class="o">.</span><span class="n">OK</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;User Cancelled&#39;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
     
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="how-do-i-have-people-respond-with-a-mouse">
<h2>How do I have people respond with a mouse?<a class="headerlink" href="#how-do-i-have-people-respond-with-a-mouse" title="Permalink to this headline">#</a></h2>
<p>PsychoPy makes it very easy to collect mouse responses.</p>
<section id="get-mouse-position-at-point-of-button-press">
<h3>Get mouse position at point of button press.<a class="headerlink" href="#get-mouse-position-at-point-of-button-press" title="Permalink to this headline">#</a></h3>
<p>The following code shows how to get the mouse position (i.e., its coordinates) at the point that a user presses a button.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">core</span><span class="p">,</span> <span class="n">visual</span><span class="p">,</span> <span class="n">event</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">([</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">)</span>
<span class="n">mouse</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">Mouse</span><span class="p">(</span><span class="n">win</span><span class="o">=</span><span class="n">win</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">mouse</span><span class="o">.</span><span class="n">getPressed</span><span class="p">()):</span> <span class="c1">#if any mouse button is pressed</span>
        <span class="n">mouse_pos</span> <span class="o">=</span> <span class="n">mouse</span><span class="o">.</span><span class="n">getPos</span><span class="p">()</span> <span class="c1">#get its position at time of button press</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;user clicked at&#39;</span><span class="p">,</span> <span class="n">mouse_pos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">):</span>
        <span class="k">break</span>
</pre></div>
</div>
</div>
</div>
<p>What’s going on here?</p>
<p><code class="docutils literal notranslate"><span class="pre">getPressed()</span></code> returns a list of mouse button states, e.g., [0,0,0] if no buttons are pressed and [1,0,0] if the first/left mouse buttom is pressed. Because it’s a non-empty list it will always evaluate to <code class="docutils literal notranslate"><span class="pre">True</span></code>. The built-in function <code class="docutils literal notranslate"><span class="pre">any()</span></code> allows us to check if any of the values in the list are <code class="docutils literal notranslate"><span class="pre">True</span></code> at which point we grab the position of the mouse and print it out for reference.</p>
</section>
<section id="show-text-until-mouse-click">
<h3>Show text until mouse click<a class="headerlink" href="#show-text-until-mouse-click" title="Permalink to this headline">#</a></h3>
<p>One difference between keyboards and mice is that <code class="docutils literal notranslate"><span class="pre">event.getKeys(['d'])</span></code> becomes false as soon as ‘d’ key is pressed (the ‘d’ is removed from the buffer and a single key-press corresponds to a single event). In contrast, <code class="docutils literal notranslate"><span class="pre">mouse.getPressed()</span></code> will be true as long as a mouse button is held. This means that if you have several text screens, it’s easy to scroll through all of them real quick in the time that the user is holding down the mouse-button. Here’s a simple function that allows you to do something (here, make the text disappear) with the very first mouse press. This code also monitors for key presses. Make sure you understand what’s going on and why we’ve inccluded <code class="docutils literal notranslate"><span class="pre">clicked=1</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">core</span><span class="p">,</span> <span class="n">visual</span><span class="p">,</span> <span class="n">event</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">([</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">)</span>
<span class="n">mouse</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">Mouse</span><span class="p">(</span><span class="n">win</span><span class="o">=</span><span class="n">win</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">show_text_until_mouse_or_keypress</span><span class="p">(</span><span class="n">win</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">color</span><span class="p">,</span><span class="n">mouse</span><span class="p">):</span>
    <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">clicked</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">while</span> <span class="nb">any</span><span class="p">(</span><span class="n">mouse</span><span class="o">.</span><span class="n">getPressed</span><span class="p">()):</span> <span class="c1"># evaluates to true when mouse button is down</span>
            <span class="n">clicked</span><span class="o">=</span><span class="mi">1</span>
            <span class="n">mouse_pos</span> <span class="o">=</span> <span class="n">mouse</span><span class="o">.</span><span class="n">getPos</span><span class="p">()</span>
            <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">clicked</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;user clicked&#39;</span><span class="p">,</span><span class="n">mouse_pos</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">()</span>        
        <span class="k">if</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;user pressed &#39;</span><span class="p">,</span><span class="n">keys</span><span class="p">)</span>
            <span class="k">return</span>

<span class="n">show_text_until_mouse_or_keypress</span><span class="p">(</span><span class="n">win</span><span class="p">,</span><span class="s2">&quot;sample text&quot;</span><span class="p">,</span><span class="s2">&quot;red&quot;</span><span class="p">,</span><span class="n">mouse</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-advanced-tip admonition">
<p class="admonition-title">Advanced tip</p>
<p>Notice that we had to use a temporary variable <code class="docutils literal notranslate"><span class="pre">keys</span></code> to store the value of a keypress (if one exists). We then check whether keys is non-empty in the subsequent if statement. Wouldn’t it be nice if we could do both in one line? Python 3.8 provides this functionality with the <code class="docutils literal notranslate"><span class="pre">:=</span></code> operator which allows us to check whether a statement is true <em>and</em> assign its return value in one go. So instead of having separate lines we can just have <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">keys</span> <span class="pre">!=</span>&#160; <span class="pre">event.getKeys():</span></code></p>
</div>
</section>
<section id="wait-for-click-on-a-picture">
<h3>Wait for click on a picture<a class="headerlink" href="#wait-for-click-on-a-picture" title="Permalink to this headline">#</a></h3>
<p>The following code waits until a user clicks on one of the items (any visual objects) currently displayed</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#.... mouse, window, pic1, pic2, pic3 initialization</span>

<span class="c1">#check mouse until pressed in one of the pics</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">mouse</span><span class="o">.</span><span class="n">isPressedIn</span><span class="p">(</span><span class="n">pic1</span><span class="p">)</span> <span class="ow">or</span> <span class="n">mouse</span><span class="o">.</span><span class="n">isPressedIn</span><span class="p">(</span><span class="n">pic2</span><span class="p">)</span> <span class="ow">or</span> <span class="n">mouse</span><span class="o">.</span><span class="n">isPressedIn</span><span class="p">(</span><span class="n">pic3</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">mouse</span><span class="o">.</span><span class="n">getPos</span><span class="p">()</span>
            <span class="k">break</span>

    <span class="c1">#assuming pic1 is the correct response</span>
    <span class="c1">#check if response is correct</span>
    <span class="k">if</span> <span class="n">pic1</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
        <span class="n">correctFeedback</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">incorrectFeedback</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can easily extend this recipe to an arbitrary number of objects by checking if <code class="docutils literal notranslate"><span class="pre">mouse.isPressedIn()</span></code> is True for any value in a list that you pass in.</p>
</div>
</section>
</section>
<section id="how-do-i-keep-doing-something-while-waiting-for-a-response">
<h2>How do I keep doing something while waiting for a response?<a class="headerlink" href="#how-do-i-keep-doing-something-while-waiting-for-a-response" title="Permalink to this headline">#</a></h2>
<p>If you need to wait for a user’s response and you don’t need to change anything on the screen you should use <code class="docutils literal notranslate"><span class="pre">event.waitKeys()</span></code>. If, however, you need to update the screen while waiting for a response, use <code class="docutils literal notranslate"><span class="pre">event.getKeys()</span></code> inside a loop.</p>
<p>This loop will execute until a user presses the ‘q’ or spacebar.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">,</span><span class="s1">&#39;space&#39;</span><span class="p">]):</span>
    <span class="c1">#do stuff here</span>
</pre></div>
</div>
<p>To terminate based on <em>any</em> keypress, just use the getKeys() function
without any arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">():</span>
    <span class="c1">#do stuff here</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you have a <code class="docutils literal notranslate"><span class="pre">win.flip()</span></code> inside a loop, that loop will execute at most every screen-refresh (or slower if you’re doing something computationally intensive inside the loop). That means that if you have a <code class="docutils literal notranslate"><span class="pre">event.getKeys()</span></code> inside the loop, you will only be checking responses every screen-refresh. At 60Hz, that means that all your responses will be rounded up to the next 16.67 ms – not what you want!!</p>
</div>
<section id="a-generic-function-for-collecting-responses">
<h3>A generic function for collecting responses<a class="headerlink" href="#a-generic-function-for-collecting-responses" title="Permalink to this headline">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">event</span><span class="p">,</span> <span class="n">core</span>

<span class="k">def</span> <span class="nf">get_keyboard_response</span><span class="p">(</span><span class="n">validResponses</span><span class="p">,</span><span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">event</span><span class="o">.</span><span class="n">clearEvents</span><span class="p">()</span>
    <span class="n">responded</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">rt</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
    <span class="n">responseTimer</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span> 
        <span class="k">if</span> <span class="ow">not</span> <span class="n">responded</span><span class="p">:</span>
            <span class="n">responded</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="n">validResponses</span><span class="p">,</span> <span class="n">timeStamped</span><span class="o">=</span><span class="n">responseTimer</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">duration</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">responseTimer</span><span class="o">.</span><span class="n">getTime</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">duration</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#end on response</span>
            <span class="k">if</span> <span class="n">responded</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">responded</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span><span class="s1">&#39;NA&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">responded</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#only get the first resp</span>

</pre></div>
</div>
</section>
<section id="a-function-for-writing-a-string-trial-info-to-a-file">
<h3>A function for writing a string (trial info) to a file.<a class="headerlink" href="#a-function-for-writing-a-string-trial-info-to-a-file" title="Permalink to this headline">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">write_to_file</span><span class="p">(</span><span class="n">fileHandle</span><span class="p">,</span><span class="n">trial</span><span class="p">,</span><span class="n">separator</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">sync</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">add_newline</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Writes a trial (array of lists) to a previously opened file&quot;&quot;&quot;</span>
    <span class="n">trial</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">trial</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">separator</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">trial</span><span class="p">])</span> <span class="c1">#join with separator</span>
    <span class="k">if</span> <span class="n">add_newline</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="c1">#add a newline</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">fileHandle</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;file is not open for writing&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sync</span><span class="p">:</span>
    	<span class="n">fileHandle</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
    	<span class="n">os</span><span class="o">.</span><span class="n">fsync</span><span class="p">(</span><span class="n">fileHandle</span><span class="p">)</span>
            
</pre></div>
</div>
</section>
</section>
<section id="convert-from-polar-to-rectangular-coordinates">
<h2>Convert from polar to rectangular coordinates<a class="headerlink" href="#convert-from-polar-to-rectangular-coordinates" title="Permalink to this headline">#</a></h2>
<p>You’ll want to do this if you you’re trying to display stimuli arranged in a
circle. As it happens, psychopy provides a handy <a class="reference external" href="http://www.psychopy.org/api/tools/coordinatetools.html">set of functions</a> for this.</p>
<p>Converting between polar and rectangular coordinates is simple trig and it’s important to understand exactly what it’s doing (not magic, just trig). Below is a function I’ve written for use in my pre-psychopy days. The function is a more general version of the
built-in one, allowing you to pass in a list of angles:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">polar_to_rect</span><span class="p">(</span><span class="n">angleList</span><span class="p">,</span><span class="n">radius</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Accepts a list of angles and a radius.  Outputs the x,y positions for the angles&quot;&quot;&quot;</span>
    <span class="n">coords</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">curAngle</span> <span class="ow">in</span> <span class="n">angleList</span><span class="p">:</span>
        <span class="n">radAngle</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">curAngle</span><span class="p">)</span><span class="o">*</span><span class="mf">2.0</span><span class="o">*</span><span class="n">pi</span><span class="p">)</span><span class="o">/</span><span class="mf">360.0</span>
        <span class="n">xCoord</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">radAngle</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">yCoord</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">radAngle</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">xCoord</span><span class="p">,</span><span class="n">yCoord</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">coords</span>

<span class="n">polar_to_rect</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">90</span><span class="p">],</span><span class="mi">50</span><span class="p">)</span> <span class="c1">#generate the x,y coordinates for supplied angles with a radius of 50</span>
<span class="c1"># [[50.0, 0.0], [43.0, 25.0], [25.0, 43.0], [0.0, 50.0]]</span>
</pre></div>
</div>
<p>You can use list comprehension to make psychopy’s built-in function work like the one above</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psychopy.tools</span> <span class="kn">import</span> <span class="n">coordinatetools</span>
<span class="p">[</span><span class="n">coordinatetools</span><span class="o">.</span><span class="n">pol2cart</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span> <span class="k">for</span> <span class="n">theta</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">90</span><span class="p">)]</span>
</pre></div>
</div>
<p>You can plug a <code class="docutils literal notranslate"><span class="pre">round()</span></code> in there to take care of the rounding. (Best not
to set the position of your stimulus to something to the negative 15th power.)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[((</span><span class="nb">round</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">0</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">0</span><span class="p">)))</span> <span class="k">for</span> <span class="n">coords</span> <span class="ow">in</span> <span class="p">[</span><span class="n">coordinatetools</span><span class="o">.</span><span class="n">pol2cart</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span> <span class="k">for</span> <span class="n">theta</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">90</span><span class="p">)]]</span>
</pre></div>
</div>
</section>
<section id="staircasing">
<h2>Staircasing<a class="headerlink" href="#staircasing" title="Permalink to this headline">#</a></h2>
<p>PsychoPy has a staircasing feature that is useful if we are trying to find a threshold (e.g., what stimulus contrast leads to 80% performance?). It is also useful if we need to equalize performance in several conditions, e.g., if we want to show different pictures at different durations such that each is recognized with equivalent accuracy.  Staircasing is implemented by the Stairhandler object. It has [lots of attributes] (<a class="reference external" href="http://www.psychopy.org/api/data.html#psychopy.data.StairHandler">http://www.psychopy.org/api/data.html#psychopy.data.StairHandler</a>). The example below shows one common way you might use it.</p>
<p>Note that I will use the term “intensity” when referring to the value of the staircasing parameter because staircasing is traditionally used to calibrate intensities, but this can be anything: duration of an object’s presentation on the screen, the time between an object and a mask, the difference in orientation between two Gabors, etc.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">data</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">staircase</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">StairHandler</span><span class="p">(</span>
    <span class="n">startVal</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span>
    <span class="n">stepType</span><span class="o">=</span><span class="s1">&#39;lin&#39;</span><span class="p">,</span> <span class="c1">#the type of step change can also be log or db</span>
    <span class="n">stepSizes</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>  <span class="c1"># step sizes after each reversal</span>
    <span class="n">minVal</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">maxVal</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="c1">#the range of values we want the signal to take</span>
    <span class="n">nUp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nDown</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>  <span class="c1"># will home in on the 80% threshold</span>
    <span class="n">nTrials</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span> <span class="c1">#max number of trials</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">staircase is an iterator; you can get its next stat by calling </span>
<span class="sd">staircase.next(), or having it in a loop:</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="k">for</span> <span class="n">cur_trial</span> <span class="ow">in</span> <span class="n">staircase</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cur_trial</span><span class="p">)</span>
    <span class="c1">#cur_trial will contain the current intensity value, here, beginning with 20 </span>
    <span class="n">staircase</span><span class="o">.</span><span class="n">addResponse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 1 if response is correct; 0 if incorrect</span>
</pre></div>
</div>
</div>
</div>
<p>When you’re done iterating, you of course have the final intensity value, and can get some additional information, e.g.,</p>
<p><code class="docutils literal notranslate"><span class="pre">numpy.average(staircase.reversalIntensities[-6:]))</span></code> gives you the average of intensities of the last 6 reversals.</p>
<p>In addition to the basic StairHandler, PsychoPy implements <a class="reference external" href="http://www.psychopy.org/api/data.html#questhandler">staircasing based on the  QUEST algorithm</a>. It’s used just like the stairhandler above, but the attributes are a bit different. The advantage of QUEST is that it allows for faster convergence.</p>
</section>
<section id="preloading-image-and-audio-files">
<h2>Preloading image and audio files<a class="headerlink" href="#preloading-image-and-audio-files" title="Permalink to this headline">#</a></h2>
<p>A flexible routine for preloading image and audio files that meet particular conditions</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">visual</span>


<span class="k">def</span> <span class="nf">load_files</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span><span class="n">extension</span><span class="p">,</span><span class="n">fileType</span><span class="p">,</span><span class="n">win</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">restriction</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span><span class="n">stim_list</span><span class="o">=</span><span class="p">[]):</span>
    <span class="sd">&quot;&quot;&quot; Load all the pics and sounds. Uses pyo or pygame for the sound library (see prefs.general[&#39;audioLib&#39;])&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="c1">#set path to current directory</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extension</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
        <span class="n">file_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">curExtension</span> <span class="ow">in</span> <span class="n">extension</span><span class="p">:</span>
            <span class="n">file_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="n">restriction</span><span class="o">+</span><span class="n">curExtension</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">file_list</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="n">restriction</span><span class="o">+</span><span class="n">extension</span><span class="p">))</span>
    <span class="n">files_data</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">#initialize files_data  as a dict because it&#39;ll be accessed by file names (picture names, sound names)</span>
    <span class="k">for</span> <span class="n">num</span><span class="p">,</span><span class="n">curFile</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file_list</span><span class="p">):</span>
        <span class="n">fullPath</span> <span class="o">=</span> <span class="n">curFile</span>
        <span class="n">fullFileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">fullPath</span><span class="p">)</span>
        <span class="n">stimFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fullFileName</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fileType</span><span class="o">==</span><span class="s2">&quot;image&quot;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fullPath</span><span class="p">)</span> <span class="c1">#gets height/width of the image</span>
                <span class="n">stim</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">ImageStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">fullPath</span><span class="p">,</span><span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">interpolate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">surface</span><span class="o">.</span><span class="n">get_width</span><span class="p">(),</span><span class="n">surface</span><span class="o">.</span><span class="n">get_height</span><span class="p">())</span>
            <span class="k">except</span><span class="p">:</span> <span class="c1">#if no pygame, image dimensions may not be available</span>
                <span class="k">pass</span>
            <span class="n">stim</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">ImageStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">fullPath</span><span class="p">,</span><span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">interpolate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">stim</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">stim</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">files_data</span><span class="p">[</span><span class="n">stimFile</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stim&#39;</span><span class="p">:</span><span class="n">stim</span><span class="p">,</span><span class="s1">&#39;fullPath&#39;</span><span class="p">:</span><span class="n">fullFileName</span><span class="p">,</span><span class="s1">&#39;filename&#39;</span><span class="p">:</span><span class="n">stimFile</span><span class="p">,</span><span class="s1">&#39;num&#39;</span><span class="p">:</span><span class="n">num</span><span class="p">,</span><span class="s1">&#39;width&#39;</span><span class="p">:</span><span class="n">width</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">:</span><span class="n">height</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">fileType</span><span class="o">==</span><span class="s2">&quot;sound&quot;</span><span class="p">:</span>
            <span class="n">files_data</span><span class="p">[</span><span class="n">stimFile</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stim&#39;</span><span class="p">:</span><span class="n">sound</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="n">fullPath</span><span class="p">),</span> <span class="s1">&#39;duration&#39;</span><span class="p">:</span><span class="n">sound</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="n">fullPath</span><span class="p">)</span><span class="o">.</span><span class="n">getDuration</span><span class="p">()}</span>
 
    <span class="c1">#optionally check that the stimuli we *need* to load are actually available in the directory; return error if there is a discrepancy</span>
    <span class="k">if</span> <span class="n">stim_list</span> <span class="ow">and</span> <span class="nb">set</span><span class="p">(</span><span class="n">files_data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">stim_list</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">(</span><span class="n">stim_list</span><span class="p">):</span>
        <span class="n">popupError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">stim_list</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">files_data</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span> <span class="o">+</span> <span class="s2">&quot; does not exist in &quot;</span> <span class="o">+</span> <span class="n">path</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">directory</span><span class="p">)</span> 
    <span class="k">return</span> <span class="n">files_data</span>

   

<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">)</span>
<span class="n">files_data</span> <span class="o">=</span> <span class="n">load_files</span><span class="p">(</span><span class="s1">&#39;stimuli/visual&#39;</span><span class="p">,</span><span class="s1">&#39;.png&#39;</span><span class="p">,</span><span class="n">fileType</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">,</span><span class="n">win</span><span class="o">=</span><span class="n">win</span><span class="p">)</span>

</pre></div>
</div>
<p>Sample usage, assuming your stimuli are in stimuli subfolders:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pic_stims</span> <span class="o">=</span> <span class="n">load_files</span><span class="p">(</span><span class="s1">&#39;stimuli/pics&#39;</span><span class="p">,</span><span class="s1">&#39;.jpg&#39;</span><span class="p">,</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="n">win</span><span class="o">=</span><span class="n">win</span><span class="p">)</span>
<span class="n">sound_stims</span> <span class="o">=</span> <span class="n">load_files</span><span class="p">(</span><span class="s1">&#39;stimuli/sounds&#39;</span><span class="p">,</span><span class="s1">&#39;.wav&#39;</span><span class="p">,</span><span class="s1">&#39;sound&#39;</span><span class="p">,</span> <span class="n">win</span><span class="o">=</span><span class="n">win</span><span class="p">)</span>
</pre></div>
</div>
<p>You can optionally specify stimList (the list of stims you’ll be using
in the experiment). This is not necessary, but lets you check to make
sure that all the stimuli you need are available.</p>
<p>Now you can display the image dog.jpg like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pic_stims</span><span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">][</span><span class="s1">&#39;stim&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
</pre></div>
</div>
<p>Get the full path of the image like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pic_stims</span><span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">][</span><span class="s1">&#39;fullPath&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can play a sound like this</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sound_stims</span><span class="p">[</span><span class="s1">&#39;beep&#39;</span><span class="p">][</span><span class="s1">&#39;stim&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
</pre></div>
</div>
<p>And get its duration like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sound_stims</span><span class="p">[</span><span class="s1">&#39;beep&#39;</span><span class="p">][</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="importing-a-custom-function-and-testing-a-function-that-s-in-a-separate-file">
<h2>Importing a custom function and Testing a function that’s in a separate file<a class="headerlink" href="#importing-a-custom-function-and-testing-a-function-that-s-in-a-separate-file" title="Permalink to this headline">#</a></h2>
<p>It is often useful to modularize your code by having conceptually distinct parts stored in separate files. For example, it’s useful to have all the code dealing with trial generation inside a separate <code class="docutils literal notranslate"><span class="pre">generate_trials.py</span></code> file. Inside it you might have a function (also called generate_trials in this example, but it can be called anything),</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_trials</span><span class="p">(</span><span class="n">subj_code</span><span class="p">,</span><span class="n">seed</span><span class="p">):</span>
    <span class="c1">#your function here...</span>
    <span class="c1">#generates trials..</span>
    <span class="c1">#writes to a file, prints stuff to the console for testing etc.</span>
</pre></div>
</div>
<p>Assuming this function is inside a file called generate_trials.py, you can import it like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">generate_trials</span> <span class="kn">import</span> <span class="n">generate_trials</span>
</pre></div>
</div>
<p>The first part is the file name; the second is the function name. They do not have to be the same. Now you’ll be able to call <code class="docutils literal notranslate"><span class="pre">generate_trial()</span></code> in the scripe into which you’ve imported it.</p>
<p><strong>However</strong>, it’s often useful to have addition code in <code class="docutils literal notranslate"><span class="pre">generate_trials.py</span></code> for testing which you do not want to import or run when you import your function. The following conditional evaluates to TRUE <strong>only</strong> when you execute your code directly, e.g., by typing <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">generate_trials.py</span></code> at the command line. It evaluates to FALSE if the code is run through an import. SOme mre</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1">#code here is run only when the file is executed directly</span>
</pre></div>
</div>
<p>You can read more about it <a class="reference external" href="https://www.jcchouinard.com/python-if-name-equals-main/">here</a></p>
</section>
<section id="importing-a-trial-list">
<h2>Importing a trial list<a class="headerlink" href="#importing-a-trial-list" title="Permalink to this headline">#</a></h2>
<p>A flexible routine for importing trial lists (of the kind generated by the generateTrials function) into a list of dictionaries, keyed by column name. This is functionally very similar to the importConditions psychopy function (see below)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">import_trials</span> <span class="p">(</span><span class="n">trial_filename</span><span class="p">,</span> <span class="n">col_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
    <span class="n">trial_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">trial_filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
 
    <span class="k">if</span> <span class="n">col_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Assume the first row contains the column names</span>
        <span class="n">col_names</span> <span class="o">=</span> <span class="n">trial_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">separator</span><span class="p">)</span>
    <span class="n">trials_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">cur_trial</span> <span class="ow">in</span> <span class="n">trial_file</span><span class="p">:</span>
        <span class="n">cur_trial</span> <span class="o">=</span> <span class="n">cur_trial</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">separator</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">cur_trial</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span> <span class="c1"># make sure the number of column names = number of columns</span>
        <span class="n">trial_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">col_names</span><span class="p">,</span> <span class="n">cur_trial</span><span class="p">))</span>
        <span class="n">trials_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trial_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">trials_list</span>
</pre></div>
</div>
<p>You can use it like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">trial_list</span> <span class="o">=</span> <span class="n">import_trials</span><span class="p">(</span><span class="s1">&#39;trialList.csv&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<p>Trial list is now a list of dictionaries keyed with column names. We can iterate through it like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">curTrial</span> <span class="ow">in</span> <span class="n">trial_list</span><span class="p">:</span>
    <span class="n">curTrial</span><span class="p">[</span><span class="n">colName</span><span class="p">]</span> <span class="c1">#to access a particular value (where colName is something like &#39;pictureType&#39;)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is actually built into PsychoPy with the
<a class="reference external" href="http://www.psychopy.org/api/data.html#psychopy.data.importConditions">importConditions function</a></p>
</div>
</section>
<section id="a-function-for-grabbing-screenshots">
<h2>A function for grabbing screenshots<a class="headerlink" href="#a-function-for-grabbing-screenshots" title="Permalink to this headline">#</a></h2>
<p>When executed, the function will write a png file containing the stuff
currently shown on the screen. It will default to using ‘win’ as the
variable for your psychopy window. If that is not what you’ve called
it, you must pass it to the function explicitly. You also need to pass
in the name of the file to which you want to write.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">grabScreenshot</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">win</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Outputs the current contents of the screen to fileName.png&quot;&quot;&quot;</span>
    <span class="n">win</span><span class="o">.</span><span class="n">getMovieFrame</span><span class="p">()</span>
    <span class="n">fileName</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.png&#39;</span>
    <span class="n">win</span><span class="o">.</span><span class="n">saveMovieFrames</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
    <span class="n">win</span><span class="o">.</span><span class="n">movieFrames</span><span class="o">=</span><span class="p">[]</span>
</pre></div>
</div>
</section>
<section id="popping-up-a-web-based-survey-from-within-your-python-script">
<h2>Popping up a web-based survey from within your python script<a class="headerlink" href="#popping-up-a-web-based-survey-from-within-your-python-script" title="Permalink to this headline">#</a></h2>
<p>The simplest way to pop-up a web-page from your script is to use the
webbrowser package:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">webbrowser</span> <span class="k">as</span> <span class="nn">web</span>
<span class="n">surveyURL</span> <span class="o">=</span> <span class="s1">&#39;http://&#39;</span> <span class="c1">#full URL goes here</span>
<span class="n">web</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">surveyURL</span><span class="p">)</span> <span class="c1">#put this line at whatever point you want to open up the webpage</span>
</pre></div>
</div>
<p>It is often useful to pre-fill the survey with some information such as
the subject code. Doing so will eliminate mismatches between the
subject’s code between the data and the survey. The easiest way to do
this is to pass in the relevant info as part of the URL.</p>
<section id="google-form">
<h3>Google form<a class="headerlink" href="#google-form" title="Permalink to this headline">#</a></h3>
<p>First, get the question codes to the questions you want to prefill by
<a class="reference external" href="https://support.google.com/docs/answer/160000?hl=en">following the instructions here</a>.</p>
<p>Then, add the question codes to the survey URL, like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">surveyURL</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/forms/d/1rg_sf55XnPOtv7ad4ESuxUpso1X5c_SvkbCL2B6hRzo/viewform&#39;</span>
<span class="n">surveyURL</span> <span class="o">+=</span> <span class="s1">&#39;?entry.900342216=</span><span class="si">%s</span><span class="s1">&amp;entry.142747125=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">runTimeVars</span><span class="p">[</span><span class="s1">&#39;subjCode&#39;</span><span class="p">],</span> <span class="n">runTimeVars</span><span class="p">[</span><span class="s1">&#39;room&#39;</span><span class="p">])</span>
<span class="n">web</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">surveyURL</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="prefilled google form" src="notebooks/images/Example_of_prefilled_google_form.png" /></p>
</section>
<section id="qualtrics-forms">
<h3>Qualtrics forms<a class="headerlink" href="#qualtrics-forms" title="Permalink to this headline">#</a></h3>
<p>The same logic applies to qualtrics forms except instead of pre-filling
a question, you would include the subject-code, etc, as part of an
embedded field. <a class="reference external" href="http://www.qualtrics.com/university/researchsuite/advanced-building/survey-flow/embedded-data/">See here for how to set embedded fields in
qualtrics</a>.</p>
</section>
</section>
<section id="using-a-webcam-in-psychopy">
<h2>Using a webcam in psychopy<a class="headerlink" href="#using-a-webcam-in-psychopy" title="Permalink to this headline">#</a></h2>
<p>This is tested to work with Mac’s iSight camera and should work on
integrated PC cameras. Not sure if it will work with external USB
cameras. Requires the CV package which can be installed through the
Anaconda package manager.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">visual</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">core</span>
<span class="kn">import</span> <span class="nn">Image</span><span class="o">,</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">pylab</span><span class="o">,</span> <span class="nn">cv</span><span class="o">,</span> <span class="nn">numpy</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">([</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">],</span> <span class="n">monitor</span><span class="o">=</span><span class="s1">&#39;testMonitor&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>

<span class="n">capture</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">CaptureFromCAM</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">myStim</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">ImageStim</span><span class="p">(</span><span class="n">win</span><span class="o">=</span><span class="n">win</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">flipHoriz</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ori</span><span class="o">=</span><span class="mi">0</span>
<span class="n">screenCapNum</span><span class="o">=</span><span class="mi">0</span>
<span class="n">flipHoriz</span><span class="o">=</span><span class="mi">0</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">QueryFrame</span><span class="p">(</span><span class="n">capture</span><span class="p">)</span>
    <span class="n">pi</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">,</span> <span class="n">cv</span><span class="o">.</span><span class="n">GetSize</span><span class="p">(</span><span class="n">img</span><span class="p">),</span> <span class="n">img</span><span class="o">.</span><span class="n">tostring</span><span class="p">(),</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="s2">&quot;BGR&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">myStim</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">):</span>
        <span class="n">ori</span> <span class="o">=</span> <span class="p">(</span><span class="n">ori</span><span class="o">+</span><span class="mi">180</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">):</span>
        <span class="n">flipHoriz</span> <span class="o">=</span> <span class="p">(</span><span class="n">flipHoriz</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">):</span>
        <span class="n">cv</span><span class="o">.</span><span class="n">SaveImage</span><span class="p">(</span><span class="s2">&quot;grab_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">screenCapNum</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.jpg&quot;</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
        <span class="n">screenCapNum</span><span class="o">+=</span><span class="mi">1</span>
    <span class="n">myStim</span><span class="o">.</span><span class="n">setOri</span><span class="p">(</span><span class="n">ori</span><span class="p">)</span>
    <span class="n">myStim</span><span class="o">.</span><span class="n">flipHoriz</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">flipHoriz</span><span class="p">)</span>
    <span class="n">myStim</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">):</span>
        <span class="k">break</span>
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Gary Lupyan<br/>
  
      &copy; Copyright 2023. Some examples adapted from http://introtopython.org/.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>